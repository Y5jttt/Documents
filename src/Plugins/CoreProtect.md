---
title: CoreProtect
icon: https://cos.npucraft.com/2025/03/21/67dd02781cfa8.jpg
author: SUPER2FH
category:
  - BasePlugin
tag: 
  - Lobby
  - Survival-Main
  - Survival-Industry
  - Survival-Resource
---



::: info 完整文档请查阅[CoreProtect](https://docs.coreprotect.net/)
:::



CoreProtect 是一款快速、高效的数据记录和防恶意破坏工具，可回滚和恢复任何损坏程度。CoreProtect 专为大型服务器而设计，可记录和管理数据，而不会影响服务器性能。



### **一、指令概览表**
| **指令**       | **功能描述**                      | **快捷指令** |
| -------------- | --------------------------------- | ------------ |
| `/co help`     | 显示所有可用指令列表              | -            |
| `/co inspect`  | 开启/关闭实时监察模式             | `/co i`      |
| `/co lookup`   | 查询方块操作记录                  | `/co l`      |
| `/co rollback` | 回滚玩家操作                      | `/co rb`     |
| `/co restore`  | 恢复被回滚的操作                  | `/co rs`     |
| `/co purge`    | 清理过期数据                      | -            |
| `/co reload`   | 重载配置文件                      | -            |
| `/co status`   | 查看插件状态及版本信息            | -            |
| `/co consumer` | 暂停/恢复数据处理队列（控制台用） | -            |



### 二、**核心指令详解**
#### **1. 查询指令 `/co lookup`**
| **参数格式** | **功能说明**                                                 |
| ------------ | ------------------------------------------------------------ |
| `u:<玩家>`   | 指定玩家（支持多个，用逗号分隔）                             |
| `t:<时间>`   | 查询时间范围（如 `1h30m`）                                   |
| `r:<半径>`   | 搜索半径（数值或 `#global`全服、`#world_nether`指定世界、`#worldedit`选区） |
| `a:<动作>`   | 过滤操作类型（如 `a:+block`仅放置方块）                      |
| `i:<包含项>` | 指定包含的方块/实体（如 `i:stone,diamond`）                  |
| `e:<排除项>` | 排除指定方块/实体（如 `e:tnt`）                              |
| `#<标签>`    | 附加操作标签（如 `#preview`预览、`#count`计数）              |

**分页功能** 
• `/co lookup <页码>`：切换查询结果页（如 `/co l 2`） 
• `/co lookup <页码>:<行数>`：自定义每页行数（如 `/co l 1:20`显示第一页20行）



#### **2. 回滚/恢复指令 (`/co rollback` 和 `/co restore`)**

**参数同 `/co lookup`**  

| **典型场景**                       | **示例指令**                                            |
| ---------------------------------- | ------------------------------------------------------- |
| 回滚玩家10分钟内操作（默认半径10） | `/co rb u:PlayerA t:10m`                                |
| 预览全服回滚（排除石头和泥土）     | `/co rb u:PlayerB t:2h r:#global e:stone,dirt #preview` |
| 恢复特定区域内方块破坏记录         | `/co rs a:-block i:gold_ore r:15`                       |



#### **3. 数据清理 `/co purge`**

| **参数**    | **说明**                                         | **示例**                          |
| ----------- | ------------------------------------------------ | --------------------------------- |
| `t:<时间>`  | 清理指定时间前的数据（如 `30d`清理30天前数据）   | `/co purge t:7d`                  |
| `r:<世界>`  | 指定清理的世界（仅v19+）                         | `/co purge t:30d r:#world_nether` |
| `i:<方块>`  | 指定清理的方块类型（仅v23+）                     | `/co purge t:14d i:lava,water`    |
| `#optimize` | MySQL数据库优化（仅MySQL环境，大幅延长清理时间） | `/co purge t:30d #optimize`       |



### 三、**参数详解表**

#### **1. 时间格式 `t:<时间>`**
| **格式** | **示例**   | **说明**                 |
| -------- | ---------- | ------------------------ |
| 组合单位 | `t:2w5d3h` | 2周5天3小时              |
| 时间区间 | `t:1h-2h`  | 1小时前至2小时前         |
| 小数单位 | `t:2.5h`   | 2.5小时（即2小时30分钟） |



#### **2. 动作类型 `a:<动作>`**

| **动作参数**  | **描述**               |
| ------------- | ---------------------- |
| `a:block`     | 方块放置/破坏          |
| `a:+block`    | 仅包含方块放置         |
| `a:-block`    | 仅包含方块破坏         |
| `a:chat`      | 聊天消息               |
| `a:click`     | 玩家交互（如点击按钮） |
| `a:container` | 容器物品存取           |
| `a:inventory` | 玩家背包变动           |



#### **3. 标签功能 `#<标签>`**

| **标签**   | **作用**               |
| ---------- | ---------------------- |
| `#preview` | 预演操作（不实际执行） |
| `#count`   | 仅显示匹配条目数量     |
| `#verbose` | 显示详细操作日志       |
| `#silent`  | 仅显示精简信息         |



### **四、常用场景示例**

1. **追踪钻石矿挖掘**  
   ```bash
   /co l i:diamond_ore a:-block t:6h
   ```
2. **回滚玩家破坏方块**  
   
   ```bash
   /co rb u:PlayerX t:30m a:-block r:20
   ```
3. **清理旧世界数据**  
   ```bash
   /co purge t:90d r:#world_old
   ```



::: note 注意事项

- 时间参数中 `1d=24小时`，`1w=7天`，`1m=分钟`，`1s=秒` 
- 使用 `#worldedit` 前需先通过WorldEdit工具选区

:::
